
<!-- saved from url=(0083)https://tech-base.net/tb-230474/Editor/show_source.php?file=mission_5-1.php&dir=../ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <style>
            .line{
                color:red;
            }
        </style>
    </head>
    <body>
                        <form action="https://tech-base.net/tb-230474/Editor/show_source.php?file=mission_5-1.php&amp;dir=../" method="get">
            ディレクトリ一覧
            <select name="dir">
                <option value="../mission1/">mission1</option><option value="../mission2/">mission2</option><option value="../mission3/">mission3</option><option value="../mission4/">mission4</option>            </select>
            <input type="submit">
        </form>
        <form>
            ファイル一覧
            <select name="file">
            <option selected="" value="mission_5-1.php">mission_5-1.php</option>            </select>
            <input type="hidden" name="dir" value="../"> 
            <input type="submit">
        </form>
        行番号 <form name="checkform"><input type="checkbox" id="checkbox" checked=""></form><hr><code><span class="line">1:</span></code><code><span style="color: #000000">
&lt;!DOCHTYPE&nbsp;html&gt;
<br><span class="line">2: </span>&nbsp;&lt;html&nbsp;lang="ja"&gt;
<br><span class="line">3: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;
<br><span class="line">4: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;charset="utf-8"&gt;
<br><span class="line">5: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;mission_5-1&lt;/title&gt;
<br><span class="line">6: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;
<br><span class="line">7: </span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?php
<br><span class="line">8: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;DB接続設定、テーブルの作成
<br><span class="line">9: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dsn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'データベース名'</span><span style="color: #007700">;
<br><span class="line">10: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ユーザ名'</span><span style="color: #007700">;
<br><span class="line">11: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'パスワード'</span><span style="color: #007700">;
<br><span class="line">12: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pdo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #0000BB">$dsn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_WARNING</span><span style="color: #007700">));
<br><span class="line">13: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"CREATE&nbsp;TABLE&nbsp;IF&nbsp;NOT&nbsp;EXISTS&nbsp;tbtest_text"
<br><span class="line">14: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">"("
<br><span class="line">15: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">"id&nbsp;INT&nbsp;AUTO_INCREMENT&nbsp;PRIMARY&nbsp;KEY,"
<br><span class="line">16: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">"name&nbsp;char(32),"
<br><span class="line">17: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">"comment&nbsp;TEXT,"
<br><span class="line">18: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">"date&nbsp;DATETIME,"
<br><span class="line">19: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">"pass&nbsp;TEXT"
<br><span class="line">20: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">");"</span><span style="color: #007700">;
<br><span class="line">21: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$pdo&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);
<br><span class="line">22: </span>&nbsp;&nbsp;&nbsp;&nbsp;
<br><span class="line">23: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//投稿機能
<br><span class="line">24: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!empty(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"name"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;!empty(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"comment"</span><span style="color: #007700">]&nbsp;&amp;&amp;&nbsp;empty(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"edit_number"</span><span style="color: #007700">]))){
<br><span class="line">25: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"name"</span><span style="color: #007700">];
<br><span class="line">26: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$comment&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"comment"</span><span style="color: #007700">];
<br><span class="line">27: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y/m/d&nbsp;H:i:s'</span><span style="color: #007700">);
<br><span class="line">28: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$pass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"pass"</span><span style="color: #007700">];
<br><span class="line">29: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$pdo&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;tbtest_text&nbsp;(name,&nbsp;comment,&nbsp;date,&nbsp;pass)&nbsp;VALUES&nbsp;(:name,&nbsp;:comment,&nbsp;:date,&nbsp;:pass)"</span><span style="color: #007700">);
<br><span class="line">30: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">);
<br><span class="line">31: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':comment'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">);
<br><span class="line">32: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':date'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">);
<br><span class="line">33: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':pass'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">);
<br><span class="line">34: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();
<br><span class="line">35: </span>&nbsp;&nbsp;&nbsp;&nbsp;}
<br><span class="line">36: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//表示
<br><span class="line">37: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;tbtest_text'</span><span style="color: #007700">;
<br><span class="line">38: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$pdo&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);
<br><span class="line">39: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$results&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();
<br><span class="line">40: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$results&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">){
<br><span class="line">41: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">].</span><span style="color: #DD0000">','</span><span style="color: #007700">;
<br><span class="line">42: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">].</span><span style="color: #DD0000">','</span><span style="color: #007700">;
<br><span class="line">43: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'comment'</span><span style="color: #007700">].</span><span style="color: #DD0000">','</span><span style="color: #007700">;
<br><span class="line">44: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'date'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;br&gt;'</span><span style="color: #007700">;
<br><span class="line">45: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//編集
<br><span class="line">46: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!empty(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"edit_number"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;!empty(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"name"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;!empty(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"comment"</span><span style="color: #007700">])){
<br><span class="line">47: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"edit_number"</span><span style="color: #007700">];
<br><span class="line">48: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"name"</span><span style="color: #007700">];
<br><span class="line">49: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$comment&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"comment"</span><span style="color: #007700">];
<br><span class="line">50: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'UPDATE&nbsp;tbtest_text&nbsp;SET&nbsp;name=:name,comment=:comment&nbsp;WHERE&nbsp;id=:id'</span><span style="color: #007700">;
<br><span class="line">51: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$pdo&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);
<br><span class="line">52: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">);
<br><span class="line">53: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':comment'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">);
<br><span class="line">54: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':id'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_INT</span><span style="color: #007700">);
<br><span class="line">55: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();&nbsp;&nbsp;
<br><span class="line">56: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br><span class="line">57: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br><span class="line">58: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br><span class="line">59: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br><span class="line">60: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//削除機能
<br><span class="line">61: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!empty(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"delete"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"deletepass"</span><span style="color: #007700">]&nbsp;===&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'pass'</span><span style="color: #007700">]){
<br><span class="line">62: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"delete"</span><span style="color: #007700">];
<br><span class="line">63: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'delete&nbsp;from&nbsp;tbtest_text&nbsp;where&nbsp;id=:id'</span><span style="color: #007700">;
<br><span class="line">64: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$pdo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);
<br><span class="line">65: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':id'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_INT</span><span style="color: #007700">);
<br><span class="line">66: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();
<br><span class="line">67: </span>&nbsp;&nbsp;&nbsp;&nbsp;}
<br><span class="line">68: </span>&nbsp;&nbsp;&nbsp;&nbsp;
<br><span class="line">69: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//編集機能
<br><span class="line">70: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!empty(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"number"</span><span style="color: #007700">])&nbsp;&amp;&amp;&nbsp;(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"editpass"</span><span style="color: #007700">])&nbsp;===&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'pass'</span><span style="color: #007700">]){
<br><span class="line">71: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//編集番号が送信されたら名前とコメントを取得する
<br><span class="line">72: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">"number"</span><span style="color: #007700">];&nbsp;
<br><span class="line">73: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;tbtest_text&nbsp;WHERE&nbsp;id=:id'</span><span style="color: #007700">;
<br><span class="line">74: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$pdo&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);
<br><span class="line">75: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':id'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_INT</span><span style="color: #007700">);
<br><span class="line">76: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();&nbsp;
<br><span class="line">77: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$results&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();&nbsp;
<br><span class="line">78: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$results&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">){
<br><span class="line">79: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$edit_num&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">];
<br><span class="line">80: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$edit_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">];
<br><span class="line">81: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$edit_comment&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'comment'</span><span style="color: #007700">];
<br><span class="line">82: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br><span class="line">83: </span>&nbsp;&nbsp;&nbsp;&nbsp;}
<br><span class="line">84: </span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">?&gt;
<br><span class="line">85: </span></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br><span class="line">86: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;
<br><span class="line">87: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;おすすめの映画・ドラマ教えてください&lt;/h1&gt;
<br><span class="line">88: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;action=""&nbsp;method="post"&gt;
<br><span class="line">89: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名前:&lt;input&nbsp;type="text"&nbsp;name="name"&nbsp;value&nbsp;=&nbsp;"<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">if(!empty(</span><span style="color: #0000BB">$edit_name</span><span style="color: #007700">)){echo&nbsp;</span><span style="color: #0000BB">$edit_name</span><span style="color: #007700">;}&nbsp;</span><span style="color: #0000BB">?&gt;</span>"&nbsp;&nbsp;placeholder&nbsp;=&nbsp;"名前"&gt;&lt;br&gt;
<br><span class="line">90: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;コメント:&lt;input&nbsp;type="text"&nbsp;name="comment"&nbsp;value&nbsp;=&nbsp;"<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">if(!empty(</span><span style="color: #0000BB">$edit_comment</span><span style="color: #007700">)){echo&nbsp;</span><span style="color: #0000BB">$edit_comment</span><span style="color: #007700">;}&nbsp;</span><span style="color: #0000BB">?&gt;</span>"&nbsp;&nbsp;placeholder&nbsp;=&nbsp;"コメント"&gt;&lt;br&gt;
<br><span class="line">91: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="hidden"&nbsp;name="edit_number"&nbsp;value&nbsp;=&nbsp;"<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">if(!empty(</span><span style="color: #0000BB">$edit_num</span><span style="color: #007700">)){echo&nbsp;</span><span style="color: #0000BB">$edit_num</span><span style="color: #007700">;}&nbsp;</span><span style="color: #0000BB">?&gt;</span>"&gt;
<br><span class="line">92: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;パスワード:&lt;input&nbsp;type="text"&nbsp;name="pass"&nbsp;value&nbsp;=&nbsp;""&nbsp;&nbsp;placeholder&nbsp;=&nbsp;"パスワード"&gt;&lt;br&gt;
<br><span class="line">93: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;name="submit"&nbsp;value="送信"&gt;
<br><span class="line">94: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;
<br><span class="line">95: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;action=""&nbsp;method="post"&gt;
<br><span class="line">96: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;削除:&lt;input&nbsp;type="number"&nbsp;name="delete"&gt;&lt;br&gt;
<br><span class="line">97: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;パスワード:&lt;input&nbsp;type="text"&nbsp;name="deletepass"&gt;&lt;br&gt;
<br><span class="line">98: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;name="deletesubmit"&nbsp;value="削除"&gt;
<br><span class="line">99: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;
<br><span class="line">100: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;action=""&nbsp;method="post"&gt;
<br><span class="line">101: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;編集:&lt;input&nbsp;type="number"&nbsp;name="number"&gt;&lt;br&gt;
<br><span class="line">102: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;パスワード:&lt;input&nbsp;type="text"&nbsp;name="editpass"&gt;&lt;br&gt;
<br><span class="line">103: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;name="edit"&nbsp;value="編集"&gt;
<br><span class="line">104: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;
<br><span class="line">105: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2&gt;-----------------------------------&lt;/h2&gt;
<br><span class="line">106: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?php
<br><span class="line">107: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//表示
<br><span class="line">108: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;tbtest_text'</span><span style="color: #007700">;
<br><span class="line">109: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$pdo&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);
<br><span class="line">110: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$results&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();
<br><span class="line">111: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$results&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">){
<br><span class="line">112: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//配列の中で使うのはテーブルのカラム名のもの
<br><span class="line">113: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">].</span><span style="color: #DD0000">','</span><span style="color: #007700">;
<br><span class="line">114: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">].</span><span style="color: #DD0000">','</span><span style="color: #007700">;
<br><span class="line">115: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'comment'</span><span style="color: #007700">].</span><span style="color: #DD0000">','</span><span style="color: #007700">;
<br><span class="line">116: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'date'</span><span style="color: #007700">].</span><span style="color: #DD0000">','</span><span style="color: #007700">;
<br><span class="line">117: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;hr&gt;"</span><span style="color: #007700">;
<br><span class="line">118: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<br><span class="line">119: </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br><span class="line">120: </span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;
<br><span class="line">121: </span>&lt;/html&gt;</span>
</code><br>    
    <script>
        let checkbox = document.getElementById('checkbox');
        checkbox.addEventListener('change', valueChange);
        function valueChange(){
            lines=document.getElementsByClassName('line')
            if((document.getElementById('checkbox').checked)){
                Array.prototype.forEach.call(lines, function(line) {
                    line.style.visibility ="visible"
                })
            }else{
                Array.prototype.forEach.call(lines, function(line) {
                    line.style.visibility ="hidden"
                })
            }
        }
        </script>
</body></html>